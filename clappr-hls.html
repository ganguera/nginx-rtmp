<!doctype html>

<html lang="en">
  <head>
    <meta charset="UTF-8">
    <script src='https://cdn.jsdelivr.net/npm/clappr@latest/dist/clappr.min.js'></script>
  </head>

  <body>
    <div id='player'></div>
    <script>
      var hostname = location.hostname;
      var streamName = getQueryString()['streamName'];

      var player = new Clappr.Player({
        source: `http://${hostname}/hls/${streamName}.m3u8`,
        autoPlay: true,
        mute: false,
        parentId: '#player'
      });

      function getQueryString() {
        var parameters = [], hash;
        var hashes = window.location.href.slice(window.location.href.indexOf('?') + 1).split('&');
        for(var i = 0; i < hashes.length; i++) {
          hash = hashes[i].split('=');
          parameters.push(hash[0]);
          parameters[hash[0]] = hash[1];
        }
        return parameters;
      }
    </script>
  </body>
</html>